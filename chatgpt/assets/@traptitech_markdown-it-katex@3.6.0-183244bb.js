import{k as h}from"./katex@0.16.4-d49885c5.js";var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function _(r){if(r.__esModule)return r;var n=r.default;if(typeof n=="function"){var e=function l(){if(this instanceof l){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(n,i);return new o}return n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(l){var i=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(e,l,i.get?i:{enumerable:!0,get:function(){return r[l]}})}),e}var d=h;function k(r,n){var e,l,i=r.posMax,o=!0,c=!0;return e=n>0?r.src.charCodeAt(n-1):-1,l=n+1<=i?r.src.charCodeAt(n+1):-1,(e===32||e===9||l>=48&&l<=57)&&(c=!1),(l===32||l===9)&&(o=!1),{can_open:o,can_close:c}}function m(r,n){var e,l,i,o,c;if(r.src[r.pos]!=="$")return!1;if(o=k(r,r.pos),!o.can_open)return n||(r.pending+="$"),r.pos+=1,!0;for(e=r.pos+1,l=e;(l=r.src.indexOf("$",l))!==-1;){for(c=l-1;r.src[c]==="\\";)c-=1;if((l-c)%2==1)break;l+=1}return l===-1?(n||(r.pending+="$"),r.pos=e,!0):l-e===0?(n||(r.pending+="$$"),r.pos=e+1,!0):(o=k(r,l),o.can_close?(n||(i=r.push("math_inline","math",0),i.markup="$",i.content=r.src.slice(e,l)),r.pos=l+1,!0):(n||(r.pending+="$"),r.pos=e,!0))}function b(r,n,e,l){var i,o,c,f,u=!1,p,a=r.bMarks[n]+r.tShift[n],t=r.eMarks[n];if(a+2>t||r.src.slice(a,a+2)!=="$$")return!1;if(a+=2,i=r.src.slice(a,t),l)return!0;for(i.trim().slice(-2)==="$$"&&(i=i.trim().slice(0,-2),u=!0),c=n;!u&&(c++,!(c>=e||(a=r.bMarks[c]+r.tShift[c],t=r.eMarks[c],a<t&&r.tShift[c]<r.blkIndent)));)r.src.slice(a,t).trim().slice(-2)==="$$"&&(f=r.src.slice(0,t).lastIndexOf("$$"),o=r.src.slice(a,f),u=!0);return r.line=c+1,p=r.push("math_block","math",0),p.block=!0,p.content=(i&&i.trim()?i+`
`:"")+r.getLines(n+1,c,r.tShift[n],!0)+(o&&o.trim()?o:""),p.map=[n,r.line],p.markup="$$",!0}function s(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var y=function(n,e){e=e||{},e.katex&&(d=e.katex),e.blockClass||(e.blockClass="");var l=function(f){e.displayMode=!1;try{return d.renderToString(f,e)}catch(u){return e.throwOnError&&console.log(u),`<span class='katex-error' title='${s(u.toString())}'>${s(f)}</span>`}},i=function(f,u){return l(f[u].content)},o=function(f){e.displayMode=!0;try{return`<p class="katex-block ${e.blockClass}">`+d.renderToString(f,e)+"</p>"}catch(u){return e.throwOnError&&console.log(u),`<p class='katex-block katex-error ${e.blockClass}' title='${s(u.toString())}'>${s(f)}</p>`}},c=function(f,u){return o(f[u].content)+`
`};n.inline.ruler.after("escape","math_inline",m),n.block.ruler.after("blockquote","math_block",b,{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.math_inline=i,n.renderer.rules.math_block=c};export{x as a,$ as c,_ as g,y as m};
