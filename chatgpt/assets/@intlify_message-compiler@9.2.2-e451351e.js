import{e as ne,c as z}from"./@intlify_shared@9.2.2-6f62a0ce.js";/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const h={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function re(s,u,f={}){const{domain:E,messages:p,args:i}=f,P=s,O=new SyntaxError(String(P));return O.code=s,u&&(O.location=u),O.domain=E,O}function we(s){throw s}function pe(s,u,f){return{line:s,column:u,offset:f}}function J(s,u,f){const E={start:s,end:u};return f!=null&&(E.source=f),E}const M=" ",_e="\r",D=`
`,he=String.fromCharCode(8232),Ce=String.fromCharCode(8233);function Te(s){const u=s;let f=0,E=1,p=1,i=0;const P=_=>u[_]===_e&&u[_+1]===D,O=_=>u[_]===D,C=_=>u[_]===Ce,y=_=>u[_]===he,b=_=>P(_)||O(_)||C(_)||y(_),A=()=>f,I=()=>E,R=()=>p,U=()=>i,k=_=>P(_)||C(_)||y(_)?D:u[_],T=()=>k(f),r=()=>k(f+i);function o(){return i=0,b(f)&&(E++,p=0),P(f)&&f++,f++,p++,u[f]}function l(){return P(f+i)&&i++,i++,u[f+i]}function a(){f=0,E=1,p=1,i=0}function d(_=0){i=_}function N(){const _=f+i;for(;_!==f;)o();i=0}return{index:A,line:I,column:R,peekOffset:U,charAt:k,currentChar:T,currentPeek:r,next:o,peek:l,reset:a,resetPeek:d,skipToPeek:N}}const $=void 0,ee="'",Se="tokenizer";function Ie(s,u={}){const f=u.location!==!1,E=Te(s),p=()=>E.index(),i=()=>pe(E.line(),E.column(),E.index()),P=i(),O=p(),C={currentType:14,offset:O,startLoc:P,endLoc:P,lastType:14,lastOffset:O,lastStartLoc:P,lastEndLoc:P,braceNest:0,inLinked:!1,text:""},y=()=>C,{onError:b}=u;function A(e,t,n,...c){const L=y();if(t.column+=n,t.offset+=n,b){const S=J(L.startLoc,t),w=re(e,S,{domain:Se,args:c});b(w)}}function I(e,t,n){e.endLoc=i(),e.currentType=t;const c={type:t};return f&&(c.loc=J(e.startLoc,e.endLoc)),n!=null&&(c.value=n),c}const R=e=>I(e,14);function U(e,t){return e.currentChar()===t?(e.next(),t):(A(h.EXPECTED_TOKEN,i(),0,t),"")}function k(e){let t="";for(;e.currentPeek()===M||e.currentPeek()===D;)t+=e.currentPeek(),e.peek();return t}function T(e){const t=k(e);return e.skipToPeek(),t}function r(e){if(e===$)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t===95}function o(e){if(e===$)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}function l(e,t){const{currentType:n}=t;if(n!==2)return!1;k(e);const c=r(e.currentPeek());return e.resetPeek(),c}function a(e,t){const{currentType:n}=t;if(n!==2)return!1;k(e);const c=e.currentPeek()==="-"?e.peek():e.currentPeek(),L=o(c);return e.resetPeek(),L}function d(e,t){const{currentType:n}=t;if(n!==2)return!1;k(e);const c=e.currentPeek()===ee;return e.resetPeek(),c}function N(e,t){const{currentType:n}=t;if(n!==8)return!1;k(e);const c=e.currentPeek()===".";return e.resetPeek(),c}function _(e,t){const{currentType:n}=t;if(n!==9)return!1;k(e);const c=r(e.currentPeek());return e.resetPeek(),c}function X(e,t){const{currentType:n}=t;if(!(n===8||n===12))return!1;k(e);const c=e.currentPeek()===":";return e.resetPeek(),c}function m(e,t){const{currentType:n}=t;if(n!==10)return!1;const c=()=>{const S=e.currentPeek();return S==="{"?r(e.peek()):S==="@"||S==="%"||S==="|"||S===":"||S==="."||S===M||!S?!1:S===D?(e.peek(),c()):r(S)},L=c();return e.resetPeek(),L}function Y(e){k(e);const t=e.currentPeek()==="|";return e.resetPeek(),t}function ue(e){const t=k(e),n=e.currentPeek()==="%"&&e.peek()==="{";return e.resetPeek(),{isModulo:n,hasSpace:t.length>0}}function G(e,t=!0){const n=(L=!1,S="",w=!1)=>{const g=e.currentPeek();return g==="{"?S==="%"?!1:L:g==="@"||!g?S==="%"?!0:L:g==="%"?(e.peek(),n(L,"%",!0)):g==="|"?S==="%"||w?!0:!(S===M||S===D):g===M?(e.peek(),n(!0,M,w)):g===D?(e.peek(),n(!0,D,w)):!0},c=n();return t&&e.resetPeek(),c}function x(e,t){const n=e.currentChar();return n===$?$:t(n)?(e.next(),n):null}function W(e){return x(e,n=>{const c=n.charCodeAt(0);return c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c===95||c===36})}function se(e){return x(e,n=>{const c=n.charCodeAt(0);return c>=48&&c<=57})}function ce(e){return x(e,n=>{const c=n.charCodeAt(0);return c>=48&&c<=57||c>=65&&c<=70||c>=97&&c<=102})}function q(e){let t="",n="";for(;t=se(e);)n+=t;return n}function ie(e){T(e);const t=e.currentChar();return t!=="%"&&A(h.EXPECTED_TOKEN,i(),0,t),e.next(),"%"}function j(e){let t="";for(;;){const n=e.currentChar();if(n==="{"||n==="}"||n==="@"||n==="|"||!n)break;if(n==="%")if(G(e))t+=n,e.next();else break;else if(n===M||n===D)if(G(e))t+=n,e.next();else{if(Y(e))break;t+=n,e.next()}else t+=n,e.next()}return t}function ae(e){T(e);let t="",n="";for(;t=W(e);)n+=t;return e.currentChar()===$&&A(h.UNTERMINATED_CLOSING_BRACE,i(),0),n}function oe(e){T(e);let t="";return e.currentChar()==="-"?(e.next(),t+=`-${q(e)}`):t+=q(e),e.currentChar()===$&&A(h.UNTERMINATED_CLOSING_BRACE,i(),0),t}function fe(e){T(e),U(e,"'");let t="",n="";const c=S=>S!==ee&&S!==D;for(;t=x(e,c);)t==="\\"?n+=le(e):n+=t;const L=e.currentChar();return L===D||L===$?(A(h.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),L===D&&(e.next(),U(e,"'")),n):(U(e,"'"),n)}function le(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return Z(e,t,4);case"U":return Z(e,t,6);default:return A(h.UNKNOWN_ESCAPE_SEQUENCE,i(),0,t),""}}function Z(e,t,n){U(e,t);let c="";for(let L=0;L<n;L++){const S=ce(e);if(!S){A(h.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${t}${c}${e.currentChar()}`);break}c+=S}return`\\${t}${c}`}function Ee(e){T(e);let t="",n="";const c=L=>L!=="{"&&L!=="}"&&L!==M&&L!==D;for(;t=x(e,c);)n+=t;return n}function Le(e){let t="",n="";for(;t=W(e);)n+=t;return n}function de(e){const t=(n=!1,c)=>{const L=e.currentChar();return L==="{"||L==="%"||L==="@"||L==="|"||!L||L===M?c:L===D?(c+=L,e.next(),t(n,c)):(c+=L,e.next(),t(!0,c))};return t(!1,"")}function F(e){T(e);const t=U(e,"|");return T(e),t}function B(e,t){let n=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&A(h.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),e.next(),n=I(t,2,"{"),T(e),t.braceNest++,n;case"}":return t.braceNest>0&&t.currentType===2&&A(h.EMPTY_PLACEHOLDER,i(),0),e.next(),n=I(t,3,"}"),t.braceNest--,t.braceNest>0&&T(e),t.inLinked&&t.braceNest===0&&(t.inLinked=!1),n;case"@":return t.braceNest>0&&A(h.UNTERMINATED_CLOSING_BRACE,i(),0),n=H(e,t)||R(t),t.braceNest=0,n;default:let L=!0,S=!0,w=!0;if(Y(e))return t.braceNest>0&&A(h.UNTERMINATED_CLOSING_BRACE,i(),0),n=I(t,1,F(e)),t.braceNest=0,t.inLinked=!1,n;if(t.braceNest>0&&(t.currentType===5||t.currentType===6||t.currentType===7))return A(h.UNTERMINATED_CLOSING_BRACE,i(),0),t.braceNest=0,V(e,t);if(L=l(e,t))return n=I(t,5,ae(e)),T(e),n;if(S=a(e,t))return n=I(t,6,oe(e)),T(e),n;if(w=d(e,t))return n=I(t,7,fe(e)),T(e),n;if(!L&&!S&&!w)return n=I(t,13,Ee(e)),A(h.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,n.value),T(e),n;break}return n}function H(e,t){const{currentType:n}=t;let c=null;const L=e.currentChar();switch((n===8||n===9||n===12||n===10)&&(L===D||L===M)&&A(h.INVALID_LINKED_FORMAT,i(),0),L){case"@":return e.next(),c=I(t,8,"@"),t.inLinked=!0,c;case".":return T(e),e.next(),I(t,9,".");case":":return T(e),e.next(),I(t,10,":");default:return Y(e)?(c=I(t,1,F(e)),t.braceNest=0,t.inLinked=!1,c):N(e,t)||X(e,t)?(T(e),H(e,t)):_(e,t)?(T(e),I(t,12,Le(e))):m(e,t)?(T(e),L==="{"?B(e,t)||c:I(t,11,de(e))):(n===8&&A(h.INVALID_LINKED_FORMAT,i(),0),t.braceNest=0,t.inLinked=!1,V(e,t))}}function V(e,t){let n={type:14};if(t.braceNest>0)return B(e,t)||R(t);if(t.inLinked)return H(e,t)||R(t);switch(e.currentChar()){case"{":return B(e,t)||R(t);case"}":return A(h.UNBALANCED_CLOSING_BRACE,i(),0),e.next(),I(t,3,"}");case"@":return H(e,t)||R(t);default:if(Y(e))return n=I(t,1,F(e)),t.braceNest=0,t.inLinked=!1,n;const{isModulo:L,hasSpace:S}=ue(e);if(L)return S?I(t,0,j(e)):I(t,4,ie(e));if(G(e))return I(t,0,j(e));break}return n}function Ne(){const{currentType:e,offset:t,startLoc:n,endLoc:c}=C;return C.lastType=e,C.lastOffset=t,C.lastStartLoc=n,C.lastEndLoc=c,C.offset=p(),C.startLoc=i(),E.currentChar()===$?I(C,14):V(E,C)}return{nextToken:Ne,currentOffset:p,currentPosition:i,context:y}}const Ae="parser",ke=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Pe(s,u,f){switch(s){case"\\\\":return"\\";case"\\'":return"'";default:{const E=parseInt(u||f,16);return E<=55295||E>=57344?String.fromCodePoint(E):"�"}}}function Oe(s={}){const u=s.location!==!1,{onError:f}=s;function E(r,o,l,a,...d){const N=r.currentPosition();if(N.offset+=a,N.column+=a,f){const _=J(l,N),X=re(o,_,{domain:Ae,args:d});f(X)}}function p(r,o,l){const a={type:r,start:o,end:o};return u&&(a.loc={start:l,end:l}),a}function i(r,o,l,a){r.end=o,a&&(r.type=a),u&&r.loc&&(r.loc.end=l)}function P(r,o){const l=r.context(),a=p(3,l.offset,l.startLoc);return a.value=o,i(a,r.currentOffset(),r.currentPosition()),a}function O(r,o){const l=r.context(),{lastOffset:a,lastStartLoc:d}=l,N=p(5,a,d);return N.index=parseInt(o,10),r.nextToken(),i(N,r.currentOffset(),r.currentPosition()),N}function C(r,o){const l=r.context(),{lastOffset:a,lastStartLoc:d}=l,N=p(4,a,d);return N.key=o,r.nextToken(),i(N,r.currentOffset(),r.currentPosition()),N}function y(r,o){const l=r.context(),{lastOffset:a,lastStartLoc:d}=l,N=p(9,a,d);return N.value=o.replace(ke,Pe),r.nextToken(),i(N,r.currentOffset(),r.currentPosition()),N}function b(r){const o=r.nextToken(),l=r.context(),{lastOffset:a,lastStartLoc:d}=l,N=p(8,a,d);return o.type!==12?(E(r,h.UNEXPECTED_EMPTY_LINKED_MODIFIER,l.lastStartLoc,0),N.value="",i(N,a,d),{nextConsumeToken:o,node:N}):(o.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,l.lastStartLoc,0,v(o)),N.value=o.value||"",i(N,r.currentOffset(),r.currentPosition()),{node:N})}function A(r,o){const l=r.context(),a=p(7,l.offset,l.startLoc);return a.value=o,i(a,r.currentOffset(),r.currentPosition()),a}function I(r){const o=r.context(),l=p(6,o.offset,o.startLoc);let a=r.nextToken();if(a.type===9){const d=b(r);l.modifier=d.node,a=d.nextConsumeToken||r.nextToken()}switch(a.type!==10&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(a)),a=r.nextToken(),a.type===2&&(a=r.nextToken()),a.type){case 11:a.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(a)),l.key=A(r,a.value||"");break;case 5:a.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(a)),l.key=C(r,a.value||"");break;case 6:a.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(a)),l.key=O(r,a.value||"");break;case 7:a.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(a)),l.key=y(r,a.value||"");break;default:E(r,h.UNEXPECTED_EMPTY_LINKED_KEY,o.lastStartLoc,0);const d=r.context(),N=p(7,d.offset,d.startLoc);return N.value="",i(N,d.offset,d.startLoc),l.key=N,i(l,d.offset,d.startLoc),{nextConsumeToken:a,node:l}}return i(l,r.currentOffset(),r.currentPosition()),{node:l}}function R(r){const o=r.context(),l=o.currentType===1?r.currentOffset():o.offset,a=o.currentType===1?o.endLoc:o.startLoc,d=p(2,l,a);d.items=[];let N=null;do{const m=N||r.nextToken();switch(N=null,m.type){case 0:m.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(m)),d.items.push(P(r,m.value||""));break;case 6:m.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(m)),d.items.push(O(r,m.value||""));break;case 5:m.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(m)),d.items.push(C(r,m.value||""));break;case 7:m.value==null&&E(r,h.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,v(m)),d.items.push(y(r,m.value||""));break;case 8:const Y=I(r);d.items.push(Y.node),N=Y.nextConsumeToken||null;break}}while(o.currentType!==14&&o.currentType!==1);const _=o.currentType===1?o.lastOffset:r.currentOffset(),X=o.currentType===1?o.lastEndLoc:r.currentPosition();return i(d,_,X),d}function U(r,o,l,a){const d=r.context();let N=a.items.length===0;const _=p(1,o,l);_.cases=[],_.cases.push(a);do{const X=R(r);N||(N=X.items.length===0),_.cases.push(X)}while(d.currentType!==14);return N&&E(r,h.MUST_HAVE_MESSAGES_IN_PLURAL,l,0),i(_,r.currentOffset(),r.currentPosition()),_}function k(r){const o=r.context(),{offset:l,startLoc:a}=o,d=R(r);return o.currentType===14?d:U(r,l,a,d)}function T(r){const o=Ie(r,ne({},s)),l=o.context(),a=p(0,l.offset,l.startLoc);return u&&a.loc&&(a.loc.source=r),a.body=k(o),l.currentType!==14&&E(o,h.UNEXPECTED_LEXICAL_ANALYSIS,l.lastStartLoc,0,r[l.offset]||""),i(a,o.currentOffset(),o.currentPosition()),a}return{parse:T}}function v(s){if(s.type===14)return"EOF";const u=(s.value||"").replace(/\r?\n/gu,"\\n");return u.length>10?u.slice(0,9)+"…":u}function me(s,u={}){const f={ast:s,helpers:new Set};return{context:()=>f,helper:i=>(f.helpers.add(i),i)}}function te(s,u){for(let f=0;f<s.length;f++)Q(s[f],u)}function Q(s,u){switch(s.type){case 1:te(s.cases,u),u.helper("plural");break;case 2:te(s.items,u);break;case 6:Q(s.key,u),u.helper("linked"),u.helper("type");break;case 5:u.helper("interpolate"),u.helper("list");break;case 4:u.helper("interpolate"),u.helper("named");break}}function De(s,u={}){const f=me(s);f.helper("normalize"),s.body&&Q(s.body,f);const E=f.context();s.helpers=Array.from(E.helpers)}function ye(s,u){const{sourceMap:f,filename:E,breakLineCode:p,needIndent:i}=u,P={source:s.loc.source,filename:E,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:p,needIndent:i,indentLevel:0},O=()=>P;function C(k,T){P.code+=k}function y(k,T=!0){const r=T?p:"";C(i?r+"  ".repeat(k):r)}function b(k=!0){const T=++P.indentLevel;k&&y(T)}function A(k=!0){const T=--P.indentLevel;k&&y(T)}function I(){y(P.indentLevel)}return{context:O,push:C,indent:b,deindent:A,newline:I,helper:k=>`_${k}`,needIndent:()=>P.needIndent}}function be(s,u){const{helper:f}=s;s.push(`${f("linked")}(`),K(s,u.key),u.modifier?(s.push(", "),K(s,u.modifier),s.push(", _type")):s.push(", undefined, _type"),s.push(")")}function Re(s,u){const{helper:f,needIndent:E}=s;s.push(`${f("normalize")}([`),s.indent(E());const p=u.items.length;for(let i=0;i<p&&(K(s,u.items[i]),i!==p-1);i++)s.push(", ");s.deindent(E()),s.push("])")}function Ue(s,u){const{helper:f,needIndent:E}=s;if(u.cases.length>1){s.push(`${f("plural")}([`),s.indent(E());const p=u.cases.length;for(let i=0;i<p&&(K(s,u.cases[i]),i!==p-1);i++)s.push(", ");s.deindent(E()),s.push("])")}}function ve(s,u){u.body?K(s,u.body):s.push("null")}function K(s,u){const{helper:f}=s;switch(u.type){case 0:ve(s,u);break;case 1:Ue(s,u);break;case 2:Re(s,u);break;case 6:be(s,u);break;case 8:s.push(JSON.stringify(u.value),u);break;case 7:s.push(JSON.stringify(u.value),u);break;case 5:s.push(`${f("interpolate")}(${f("list")}(${u.index}))`,u);break;case 4:s.push(`${f("interpolate")}(${f("named")}(${JSON.stringify(u.key)}))`,u);break;case 9:s.push(JSON.stringify(u.value),u);break;case 3:s.push(JSON.stringify(u.value),u);break}}const Me=(s,u={})=>{const f=z(u.mode)?u.mode:"normal",E=z(u.filename)?u.filename:"message.intl",p=!!u.sourceMap,i=u.breakLineCode!=null?u.breakLineCode:f==="arrow"?";":`
`,P=u.needIndent?u.needIndent:f!=="arrow",O=s.helpers||[],C=ye(s,{mode:f,filename:E,sourceMap:p,breakLineCode:i,needIndent:P});C.push(f==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),C.indent(P),O.length>0&&(C.push(`const { ${O.map(A=>`${A}: _${A}`).join(", ")} } = ctx`),C.newline()),C.push("return "),K(C,s),C.deindent(P),C.push("}");const{code:y,map:b}=C.context();return{ast:s,code:y,map:b?b.toJSON():void 0}};function $e(s,u={}){const f=ne({},u),p=Oe(f).parse(s);return De(p,f),Me(p,f)}export{h as C,$e as b,re as c,we as d};
