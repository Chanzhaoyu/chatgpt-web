import{I as L,J as Y,$ as Q,a0 as J,Q as Z,P as $,D as j,C as z,t as H,F as M}from"./element-plus.5b1237d2.js";import{D as W,d as X}from"./@element-plus.c3fd6bb1.js";import{r as D}from"./index.4abee10a.js";import{P as ee}from"./index.9779dcb9.js";import{d as ue,s as A,Z as le,r as p,e as ae,o as b,c as C,U as u,L as t,u as a,a as n,S as oe,i as c,T as te,a9 as se,Q as ne,R as S}from"./@vue.50ba5cf8.js";function Se(){return D.get({url:"/setting/storage/list"})}function de(i){return D.post({url:"/setting/storage/edit",params:i})}function ie(i){return D.get({url:"/setting/storage/detail",params:i})}const re={class:"edit-popup"},pe={key:0},ce={class:"flex-1"},me={class:"flex-1"},Fe={class:"flex-1"},_e={class:"flex-1"},Ee=n("div",{class:"form-tips"}," \u8BB0\u5FC6\u8D8A\u5F3A\uFF0CChatGPT \u5728\u5BF9\u8BDD\u8FC7\u7A0B\u4E2D\u80FD\u8BB0\u4F4F\u7684\u4E0A\u4E0B\u6587\u8D8A\u591A\uFF0C\u4F46\u53EF\u80FD\u4F1A\u6D88\u8017\u66F4\u591A\u7684\u8D39\u7528 ",-1),fe={class:"flex-1"},ge=n("div",{class:"form-tips"}," \u503E\u5411\u4E8E\u63D0\u4F9B\u7CBE\u786E\u7684\u5206\u6790\uFF0C\u51CF\u5C11ChatGpt\u80E1\u8BF4\u516B\u9053\u7684\u53EF\u80FD\u6027 ",-1),ve={class:"flex-1"},be={class:"flex-1"},ye=ue({__name:"edit",emits:["success"],setup(i,{expose:y,emit:k}){const m=A(),F=A(),o=le({engine:"",bucket:"",access_key:"",secret_key:"",domain:"",region:"",status:0}),_=p(10),E=p(!0),f=p("gpt-3.5-turbo"),g=p("\u51C6\u786E\u53EF\u4FE1"),x=[{value:"gpt-3.5-turbo",label:"gpt-3.5-turbo"},{value:"gpt-3.5",label:"gpt-3.5"},{value:"text-davinci-003",label:"text-davinci-003"},{value:"code-davinci-002",label:"code-davinci-002"},{value:"code-cushman-001",label:"code-cushman-001"}],h=[{name:"openai",type:"openai",tips:""},{name:"\u963F\u91CC\u4E91OSS",type:"aliyun",tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:"qcloud",tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],R={bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],access_key:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secret_key:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}]},w=ae(()=>h.find(s=>s.type==o.engine)),U=async()=>{var s,e;await((s=m.value)==null?void 0:s.validate()),await de(o),(e=F.value)==null||e.close(),k("success")},O=async()=>{const s=await ie({engine:o.engine});for(const e in s)o[e]=s[e]},q=s=>{var e;o.engine=s,(e=F.value)==null||e.open(),O()},I=()=>{var s;(s=m.value)==null||s.resetFields()};return y({open:q}),(s,e)=>{const d=j,r=z,N=L,P=Y,G=Q,v=J,B=Z,T=H,V=$,K=M;return b(),C("div",re,[u(ee,{ref_key:"popupRef",ref:F,title:"\u8BBE\u7F6E\u5F15\u64CE",async:!0,width:"550px",onConfirm:U,onClose:I},{default:t(()=>[u(K,{ref_key:"formRef",ref:m,model:a(o),"label-width":"120px",rules:R},{default:t(()=>[u(d,{label:"\u5F53\u524D\u5F15\u64CE",prop:"engine"},{default:t(()=>{var l;return[n("div",null,oe((l=a(w))==null?void 0:l.name),1)]}),_:1}),a(o).engine!=="local"?(b(),C("div",pe,[u(d,{label:"API_KEY",prop:"access_key"},{default:t(()=>[u(r,{modelValue:a(o).access_key,"onUpdate:modelValue":e[0]||(e[0]=l=>a(o).access_key=l),placeholder:"sk-",clearable:""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u63A5\u53E3\u57DF\u540D",prop:"domain"},{default:t(()=>[n("div",ce,[n("div",null,[u(r,{modelValue:a(o).domain,"onUpdate:modelValue":e[1]||(e[1]=l=>a(o).domain=l),placeholder:"https://api.openai.com",clearable:""},null,8,["modelValue"])])])]),_:1}),u(d,{label:"\u4EE3\u7406\u5730\u5740",prop:"domain"},{default:t(()=>[n("div",me,[n("div",null,[u(r,{modelValue:a(o).domain,"onUpdate:modelValue":e[2]||(e[2]=l=>a(o).domain=l),placeholder:"",clearable:""},null,8,["modelValue"])])])]),_:1}),u(d,{label:"\u9009\u62E9\u6A21\u578B",prop:"domain"},{default:t(()=>[n("div",Fe,[u(P,{modelValue:a(f),"onUpdate:modelValue":e[3]||(e[3]=l=>c(f)?f.value=l:null),class:"w-[100%] pl-0",placeholder:"Select"},{default:t(()=>[(b(),C(te,null,se(x,l=>u(N,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),u(d,{label:"\u8BB0\u5FC6\u5FAE\u8C03",prop:"domain"},{default:t(()=>[n("div",_e,[u(G,{class:"pl-2",modelValue:a(_),"onUpdate:modelValue":e[4]||(e[4]=l=>c(_)?_.value=l:null)},null,8,["modelValue"]),Ee])]),_:1}),u(d,{label:"\u6027\u683C\u5FAE\u8C03",prop:"domain"},{default:t(()=>[n("div",fe,[u(B,{modelValue:a(g),"onUpdate:modelValue":e[5]||(e[5]=l=>c(g)?g.value=l:null)},{default:t(()=>[u(v,{label:"\u51C6\u786E\u53EF\u4FE1"}),u(v,{label:"\u5E73\u8861\u6027\u683C"}),u(v,{label:"\u53D1\u6563\u601D\u7EF4"})]),_:1},8,["modelValue"]),ge])]),_:1}),u(d,{label:"\u8D85\u65F6\u65F6\u95F4",prop:"domain"},{default:t(()=>[n("div",ve,[n("div",null,[u(r,{modelValue:a(o).domain,"onUpdate:modelValue":e[6]||(e[6]=l=>a(o).domain=l),placeholder:"\u5355\u4F4D\u79D2",clearable:""},null,8,["modelValue"])])])]),_:1}),u(d,{label:"\u8FDE\u7EED\u5BF9\u8BDD",prop:"domain"},{default:t(()=>[n("div",be,[u(T,{modelValue:a(E),"onUpdate:modelValue":e[7]||(e[7]=l=>c(E)?E.value=l:null),class:"pl-0","inline-prompt":"","active-icon":a(W),"inactive-icon":a(X)},null,8,["modelValue","active-icon","inactive-icon"])])]),_:1})])):ne("",!0),u(d,{label:"\u542F\u7528\u72B6\u6001",prop:"status"},{default:t(()=>[u(B,{modelValue:a(o).status,"onUpdate:modelValue":e[8]||(e[8]=l=>a(o).status=l)},{default:t(()=>[u(V,{label:0},{default:t(()=>[S("\u5173\u95ED")]),_:1}),u(V,{label:1},{default:t(()=>[S("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{ye as _,Se as s};
